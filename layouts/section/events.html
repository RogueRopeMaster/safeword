{{ define "title" }}
  {{ .Title }} Â· {{ .Site.Title }}
{{ end }}

{{ define "content" }}
  {{ $allPagesDesc := sort .Pages "Params.event_date" "desc" }}

  <section class="container list events-hub">
    <header class="events-page-header">
      <h1 class="title">
        <a class="title-link" href="{{ .Permalink | safeURL }}">
          {{ i18n (lower .Title) | default .Title | title }}
        </a>
      </h1>
    </header>
    <div class="events-grid">
      {{ range $allPagesDesc }}
        {{ $event := . }}
        {{ $imageAlt := $event.Params.image_alt | default (printf "Poster for %s" $event.Title) }}
        {{ $eventDate := partial "events/date-time.html" $event }}
        {{ $titleCode := .Title }}
        {{ $titleSlogan := "" }}
        {{ if in .Title ":" }}
          {{ $parts := split .Title ":" }}
          {{ $titleCode = strings.TrimSpace (index $parts 0) }}
          {{ $titleSlogan = strings.TrimSpace (delimit (after 1 $parts) ":") }}
        {{ end }}
        <a href="{{ .RelPermalink }}" class="event-card">
          <div class="event-card-media">
            {{ if $event.Params.image }}
              <img src="{{ $event.Params.image }}" alt="{{ $imageAlt }}" class="event-image">
            {{ else }}
              <div class="event-image event-image-fallback" aria-hidden="true">
                <i class="fa-solid fa-image"></i>
              </div>
            {{ end }}
          </div>
          <div class="event-info">
            <h3 class="event-title{{ if eq $titleSlogan "" }} event-title-single{{ end }}">
              <span class="event-title-head">
                <span class="event-title-code{{ if eq $titleSlogan "" }} event-title-code-full{{ end }}">{{ $titleCode }}</span>
                <span class="event-card-date">{{ $eventDate | time.Format (.Site.Params.dateFormat | default "January 2, 2006") }}</span>
              </span>
              {{ if ne $titleSlogan "" }}
                <span class="event-title-slogan">{{ $titleSlogan }}</span>
              {{ end }}
            </h3>
          </div>
        </a>
      {{ end }}
    </div>
  </section>
{{ end }}
